extends ../headers/base

block content
    style.
        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        
        .stats-overview {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        .stats-card {
            background: linear-gradient(135deg, #17a2b8 0%, #6610f2 100%);
            color: white;
            border-radius: 16px;
            padding: 2rem;
            text-align: center;
        }
        
        .stats-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
        }
        
        .stats-number {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
        }
        
        .staff-table-container {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .table thead th {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: none;
            padding: 1rem;
            font-weight: 700;
            color: #495057;
            text-transform: uppercase;
            font-size: 0.875rem;
            letter-spacing: 0.5px;
        }
        
        .table tbody td {
            padding: 1rem;
            border-color: #f1f3f4;
            vertical-align: middle;
        }
        
        .table tbody tr:hover {
            background: #f8f9fa;
        }
        
        .staff-info {
            display: flex;
            align-items: center;
        }
        
        .staff-avatar {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 1rem;
            font-size: 1.1rem;
        }
        
        .bus-info-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
        }
        
        .route-indicator {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 600;
            display: inline-block;
        }
        
        .contact-info {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 0.5rem 0.75rem;
            border-left: 4px solid #667eea;
        }
        
        .btn-delete {
            background: linear-gradient(135deg, #dc3545 0%, #e83e8c 100%);
            border: none;
            border-radius: 10px;
            padding: 8px 16px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.875rem;
        }
        
        .btn-delete:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
            color: white;
        }
        
        .action-bar {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 2rem;
        }
        
        .btn-add-staff {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            border: none;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-add-staff:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
            color: white;
        }
        
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: #6c757d;
        }
        
        .empty-state i {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

    <div class="admin-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="display-5 fw-bold mb-2">Staff Management</h1>
                    <p class="lead mb-0">Manage drivers, conductors and other staff members</p>
                </div>
                <div class="col-md-4 text-md-end">
                    <i class="fas fa-users-cog fa-3x opacity-75"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="stats-overview">
            <div class="row">
                <div class="col-md-4">
                    <div class="stats-card">
                        <div class="stats-icon">
                            <i class="fas fa-users fa-2x"></i>
                        </div>
                        <div class="stats-number">#{assistants.length}</div>
                        <div class="fw-semibold">Total Staff</div>
                        <small class="opacity-75">Active staff members</small>
                    </div>
                </div>
                <div class="col-md-8 d-flex align-items-center">
                    <div>
                        <h4 class="fw-bold mb-3">Staff Overview</h4>
                        <p class="text-muted mb-0">Monitor and manage all staff members assigned to your buses. Track their assignments, contact information, and performance.</p>
                        <div class="mt-3">
                            <a href="/owner/worker-account" class="btn btn-add-staff">
                                <i class="fas fa-plus me-2"></i>Add New Staff
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        if assistants && assistants.length > 0
            <div class="staff-table-container">
                <div class="p-3 border-bottom">
                    <h5 class="fw-bold mb-0">
                        <i class="fas fa-list me-2"></i>Staff Members
                    </h5>
                </div>
                
                <table class="table table-hover mb-0">
                    <thead>
                        <tr>
                            <th>S.N</th>
                            <th>Staff Details</th>
                            <th>Contact Info</th>
                            <th>Assigned Bus</th>
                            <th>Route Information</th>
                            <th>Capacity</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        each assistant, i in assistants
                            <tr>
                                <td class="fw-bold">#{i+1}</td>
                                <td>
                                    <div class="staff-info">
                                        <div class="staff-avatar">
                                            #{assistant.name.charAt(0).toUpperCase()}
                                        </div>
                                        <div>
                                            <div class="fw-bold">#{assistant.name}</div>
                                            <small class="text-muted">Staff Member</small>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div class="fw-semibold">
                                            <i class="fas fa-phone me-2"></i>#{assistant.phoneNo}
                                        </div>
                                        <small class="text-muted">Primary contact</small>
                                    </div>
                                </td>
                                <td>
                                    <div>
                                        <div class="fw-bold text-primary">#{assistant.busName}</div>
                                        <small class="text-muted">Bus ##{assistant.busNumber}</small>
                                    </div>
                                </td>
                                <td>
                                    <div class="route-indicator">
                                        <i class="fas fa-route me-1"></i>
                                        #{assistant.startLocation} â†’ #{assistant.endLocation}
                                    </div>
                                </td>
                                <td>
                                    <div class="text-center">
                                        <div class="fw-bold fs-5 text-info">#{assistant.totalSeats}</div>
                                        <small class="text-muted">seats</small>
                                    </div>
                                </td>
                                <td>
                                    <button class="btn btn-delete" onclick=`deleteData('user/delete-user/${assistant.id}')` title="Remove staff member">
                                        <i class="fas fa-trash-alt me-1"></i>Remove
                                    </button>
                                </td>
                            </tr>
                    </tbody>
                </table>
            </div>
        else
            <div class="staff-table-container">
                <div class="empty-state">
                    <i class="fas fa-users-slash"></i>
                    <h4 class="fw-bold mb-3">No Staff Members Found</h4>
                    <p class="text-muted mb-4">You haven't assigned any staff members to your buses yet.</p>
                    <a href="/owner/worker-account" class="btn btn-add-staff">
                        <i class="fas fa-plus me-2"></i>Add Your First Staff Member
                    </a>
                </div>
            </div>
    </div>

    script(src="../../js/deleteAxios.js")
